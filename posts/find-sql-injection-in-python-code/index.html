<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.101.0"><title>Find SQL injection in Python code | Ryan's blog</title><link rel=stylesheet href=https://blog.prpr.tw/css/simpleness.css><link rel=canonical href=https://blog.prpr.tw/posts/find-sql-injection-in-python-code/><link rel=alternate type=application/rss+xml href title="Ryan's blog"><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css rel=stylesheet></head><body class=container><nav class=navigation><div class=nav-left><div class="nav-item nav-title"><a href=https://blog.prpr.tw/>Ryan's blog</a></div><div class="nav-item nav-menu"><a href=/categories/coding>Coding</a>
<a href=/categories/hiking>Hiking</a></div></div><div class="nav-item nav-right fontawesome"><a href=https://twitter.com/v_kiiii target=_blank><i title=Twitter class="fab fa-twitter"></i></a>
<a href=https://github.com/ryanchentw target=_blank><i title=GitHub class="fab fa-github"></i></a></div></nav><article class=post><header class=post-header><h1 style=text-align:center>Find SQL injection in Python code</h1><div class=post-metadata><time datetime=2017-12-11T10:08:06+08:00>December 11, 2017</time> &nbsp;
<i class="fas fa-folder"></i>
<a href=/categories/coding>coding</a>
&nbsp;</div></header><div class=post-text><p><a href=https://github.com/uber/py-find-injection>https://github.com/uber/py-find-injection</a></p><p>用程式化的方式掃出 code base 沒有乖乖用 paramstyle sql 語句</p><p><img src=https://i.imgur.com/P18DyHR.jpg alt=Imgur></p><p>鴿子封包，uber 在 2013 年丟出來的玩具</p><p>原理利用 AST 拆 code 找出特定的 function name，並比對第一個參數有沒有用過字串串接</p><p><a href=https://github.com/uber/py-find-injection/blob/f91c137e8b78424bec78085df771b1a6f62c6769/py_find_injection/__init__.py#L80>default 會找 session.execute cursor.execute</a></p><p>簡單但有效，clone 下來改也很快。</p><p>其中找<a href=https://github.com/uber/py-find-injection/blob/master/py_find_injection/__init__.py#L62>字串串接的 code</a>也滿有趣的，值得一讀</p><p>但是歹記通常不是憨人想得這麼簡單，code base 裡面總有為了省事，及不好處理的 list parameter，
而自己串 sql。有年紀的 codebase 掃下去大概只有淚與累，大概只能用在自己開發或是放在 CI 上逼死同事。</p></div><footer class=post-footer><div class=post-tags><i class="fas fa-tags"></i>
<a href=/tags/python>Python</a>
&nbsp;</div><div class=related-posts><h4>Related Posts</h4><i class="fas fa-paperclip"></i>
<a href=/posts/pip-malicious-packages/>Pip 藏有惡意套件</a><br><i class="fas fa-paperclip"></i>
<a href=/posts/google-takeout/>根據標籤下載 gmail 備份</a><br><i class="fas fa-paperclip"></i>
<a href=/posts/python-xml-vulnerabilities/>python xml vulnerabilities</a><br></div></footer><div class=comments><div class=comments><div class="comments-item comments-disqus"><div id=disqus_thread></div><script>window.addEventListener("load",()=>{(function(){var e=document,t=e.createElement("script");t.src="https://prpr-tw.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()})</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></article><div class=foot>&copy; - 2022 &#183;
<a href=/>Ryan's blog</a> &#183;
Theme <a href=https://github.com/RainerChiang/simpleness>Simpleness</a> Powered by <a href=https://gohugo.io/>Hugo</a> &#183;
<a href=#><i class="fas fa-chevron-up"></i></a></div></body></html>