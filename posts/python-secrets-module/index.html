<!doctype html><html lang=zh-TW><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.121.2"><title>Why the secrets Module is the Ideal Choice for Generating Random Strings in Python | Ryan's blog </title><link rel=stylesheet href=https://blog.cwc.tw/css/simpleness.css><link rel=canonical href=https://blog.cwc.tw/posts/python-secrets-module/><link rel=alternate type=application/rss+xml href title="Ryan's blog"><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css rel=stylesheet></head><body class=container><nav class=navigation><div class=nav-left><div class="nav-item nav-title"><a href=https://blog.cwc.tw/>Ryan's blog</a></div><div class="nav-item nav-menu"><a href=/categories/coding>Coding</a>
<a href=/categories/hiking>Hiking</a></div></div><div class="nav-item nav-right fontawesome"><a href=https://twitter.com/v_kiiii target=_blank><i title=Twitter class="fab fa-twitter"></i>
</a><a href=https://github.com/ryanchentw target=_blank><i title=GitHub class="fab fa-github"></i></a></div></nav><article class=post><header class=post-header><h1 style=text-align:center>Why the secrets Module is the Ideal Choice for Generating Random Strings in Python</h1><div class=post-metadata><time datetime=2023-04-08T09:58:01+08:00>April 08, 2023</time> &nbsp;</div></header><div class=post-text><p>以前就一直很愛用 ruby 提供的 <a href=https://ruby-doc.org/stdlib-2.5.1/libdoc/securerandom/rdoc/SecureRandom.html>securerandom</a> 來產生隨機字串，</p><p>但之前長時間使用 Python2 進行開發，一直忽略了 Python3 應該也會有類似的 module，</p><p>直到昨天有需求又查了一下發現，ㄏㄏ早在 3.6 就有提供這個 module 了，試一下跟 <a href=https://ruby-doc.org/stdlib-2.5.1/libdoc/securerandom/rdoc/SecureRandom.html>securerandom</a> 87% 像，推薦給大家</p><p>簡單來說用 <code>secrets</code> 的好處是比起傳統 <code>random</code> module 產生出來的隨機字串</p><ul><li>更具有密碼學上的安全性</li><li>更快，更簡單可以產生字串</li></ul><p>原理的話其實就是用 <a href=https://docs.python.org/3/library/os.html#os.urandom>os.urandom</a>
取代 <a href=https://docs.python.org/3/library/os.html#os.urandom>random module</a> 內的擬隨機演算法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 偷懶版本，要注意 32 是 bytes，實際產生出來的長度因為 base64 encode 的關係會超過 32</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> secrets <span style=color:#f92672>import</span> token_urlsafe
</span></span><span style=display:flex><span>print(token_urlsafe(<span style=color:#ae81ff>32</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 長一點的版本，使用 secrets.choice</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> secrets <span style=color:#f92672>import</span> string
</span></span><span style=display:flex><span>alphabet <span style=color:#f92672>=</span> string<span style=color:#f92672>.</span>ascii_letters <span style=color:#f92672>+</span> string<span style=color:#f92672>.</span>digits
</span></span><span style=display:flex><span>random_string <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>join(secrets<span style=color:#f92672>.</span>choice(alphabet) <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>16</span>))
</span></span><span style=display:flex><span>print(random_string)
</span></span></code></pre></div><h2 id=chatgpt-的回答>ChatGPT 的回答</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>The benefits of using the secrets module to generate random strings <span style=color:#f92672>(</span>and other values<span style=color:#f92672>)</span> over the random module are:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Cryptographic security: The secrets module uses a cryptographically secure random number generator provided by the operating system, which is designed to be resistant to prediction and manipulation. The random module, on the other hand, uses a simpler algorithm that is not intended <span style=color:#66d9ef>for</span> cryptographic use.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Convenience: The secrets module provides a simple and intuitive interface <span style=color:#66d9ef>for</span> generating random values, without requiring manual seeding or other setup.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Efficiency: The secrets module is optimized <span style=color:#66d9ef>for</span> generating large amounts of random data quickly, and can generate random strings and other values much faster than the random module.
</span></span></code></pre></div><h2 id=references>References</h2><ul><li><a href=https://peps.python.org/pep-0506/>https://peps.python.org/pep-0506/</a></li><li><a href=https://docs.python.org/3/library/secrets.html>https://docs.python.org/3/library/secrets.html</a></li><li><a href=https://github.com/python/cpython/blob/main/Lib/secrets.py>source code</a></li></ul></div><footer class=post-footer></footer><div class=comments><div class=comments></div></div></article><div class=foot>&copy; - 2024 &#183;
<a href=/>Ryan's blog </a>&#183;
Theme <a href=https://github.com/RainerChiang/simpleness>Simpleness</a> Powered by <a href=https://gohugo.io/>Hugo</a> &#183;
<a href=#><i class="fas fa-chevron-up"></i></a></div></body></html>