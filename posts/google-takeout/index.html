<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.96.0"><title>根據標籤下載 gmail 備份 | Ryan's blog</title><link rel=stylesheet href=https://blog.prpr.tw/css/simpleness.css><link rel=canonical href=https://blog.prpr.tw/posts/google-takeout/><link rel=alternate type=application/rss+xml href title="Ryan's blog"><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css rel=stylesheet></head><body class=container><nav class=navigation><div class=nav-left><div class="nav-item nav-title"><a href=https://blog.prpr.tw/>Ryan's blog</a></div><div class="nav-item nav-menu"><a href=/categories/coding>Coding</a>
<a href=/categories/hiking>Hiking</a></div></div><div class="nav-item nav-right fontawesome"></div></nav><article class=post><header class=post-header><h1 style=text-align:center>根據標籤下載 gmail 備份</h1><div class=post-metadata><time datetime=2017-09-24T20:08:08+08:00>September 24, 2017</time> &nbsp;
<i class="fas fa-folder"></i>
<a href=/categories/coding>coding</a>
&nbsp;</div></header><div class=post-text><p>最近剛好有一些處理 email 資料的需求，要從一堆 exception mail 裡面撈出一些 id。</p><p>之前數量不多都馬手動複製</p><p>但這次有幾十個 conversations 看了就很懶，我內心特爛軟</p><p>來問問看 Google 老師看有沒有聰明方法可以搞定這件事</p><p>&mldr;</p><p>\<a href=https://takeout.google.com/settings/takeout>Google takeout</a>/ 小叮噹語氣</p><p>本質上是 Google service 眾的備份工具，在備份 gmail 部分裡面，可以只下載特定 email label</p><p>還有一個問題是下載格式會是 mbox format，必須再做處理</p><p>流程會是這樣子的</p><ul><li>把要 exported 的 email conversations 加一個新 label e.g. <code>exported</code></li><li>去 Google takeout 請求該 label 的 backup</li><li>Parse mbox file</li></ul><p><img src=https://i.imgur.com/ktWAnpW.png alt=Imgur></p><p>也找到有志同道合兄弟寫的 <a href=https://github.com/Sydius/mbox-to-txt>Sydius/mbox-to-txt</a></p><p>但這位 S 弟兄可能只要純文字，所以不吃的格式特多，這次要的資料被碼成 base64</p><p>參考一下前人種樹是利用 <a href=https://docs.python.org/2/library/mailbox.html>python mailbox module</a> 處理，copy 改下搞定</p></div><footer class=post-footer><div class=post-tags><i class="fas fa-tags"></i>
<a href=/tags/python>Python</a>
&nbsp;</div><div class=related-posts><h4>Related Posts</h4><i class="fas fa-paperclip"></i>
<a href=/posts/python-xml-vulnerabilities/>python xml vulnerabilities</a><br></div></footer><div class=comments><div class=comments></div></div></article><div class=foot>&copy; - 2022 &#183;
<a href=/>Ryan's blog</a> &#183;
Theme <a href=https://github.com/RainerChiang/simpleness>Simpleness</a> Powered by <a href=https://gohugo.io/>Hugo</a> &#183;
<a href=#><i class="fas fa-chevron-up"></i></a></div></body></html>